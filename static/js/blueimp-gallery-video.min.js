(function(a){if(typeof define==="function"&&define.amd){define(["./blueimp-helper","./blueimp-gallery"],a)}else{a(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}})(function(c,d){var a=d.prototype;c.extend(a.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoIframeClass:"video-iframe",videoCoverClass:"video-cover",videoPlayClass:"video-play",videoPlaysInline:true,videoPreloadProperty:"preload",videoPosterProperty:"poster"});var b=a.handleSlide;c.extend(a,{handleSlide:function(f,e){b.call(this,f,e);this.setTimeout(function(){if(this.activeVideo){this.activeVideo.pause()}})},videoFactory:function(p,k,q){var l=this;var g=this.options;var r=this.elementPrototype.cloneNode(false);var f=c(r);var n=[{type:"error",target:r}];var u=q||document.createElement("video");var v=this.elementPrototype.cloneNode(false);var o=document.createElement("a");var j=this.getItemProperty(p,g.urlProperty);var e=this.getItemProperty(p,g.sourcesProperty);var x=this.getItemProperty(p,g.titleProperty);var w=this.getItemProperty(p,g.videoPosterProperty);var m=[o];var h;var s;var t;f.addClass(g.videoContentClass);c(o).addClass(g.videoPlayClass);if(!c(v).addClass(g.videoCoverClass).hasClass(g.toggleClass)){m.push(v)}v.draggable=false;if(x){r.title=x;o.setAttribute("aria-label",x)}if(w){v.style.backgroundImage='url("'+w+'")'}if(u.setAttribute){if(g.videoPlaysInline){u.setAttribute("playsinline","")}}else{f.addClass(g.videoIframeClass)}u.preload=this.getItemProperty(p,g.videoPreloadProperty)||"none";if(this.support.source&&e){for(t=0;t<e.length;t+=1){u.appendChild(c.extend(this.sourcePrototype.cloneNode(false),e[t]))}}if(j){u.src=j}o.href=j||(e&&e.length&&e[0].src);if(u.play&&u.pause){(q||c(u)).on("error",function(){l.setTimeout(k,n)}).on("pause",function(){if(u.seeking){return}s=false;f.removeClass(l.options.videoLoadingClass).removeClass(l.options.videoPlayingClass);if(h){l.container.addClass(l.options.controlsClass)}u.controls=false;if(u===l.activeVideo){delete l.activeVideo}if(l.interval){l.play()}}).on("playing",function(){s=false;v.removeAttribute("style");f.removeClass(l.options.videoLoadingClass).addClass(l.options.videoPlayingClass)}).on("play",function(){window.clearTimeout(l.timeout);s=true;f.addClass(l.options.videoLoadingClass);if(l.container.hasClass(l.options.controlsClass)){h=true;l.container.removeClass(l.options.controlsClass)}else{h=false}u.controls=true;l.activeVideo=u});c(m).on("click",function(i){l.preventDefault(i);l.activeVideo=u;if(s){u.pause()}else{u.play()}});r.appendChild((q&&q.element)||u)}r.appendChild(v);r.appendChild(o);this.setTimeout(k,[{type:"load",target:r}]);return r}});return d});