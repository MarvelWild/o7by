(function(a){if(typeof define==="function"&&define.amd){define(["./blueimp-helper","./blueimp-gallery-video"],a)}else{a(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}})(function(e,f){if(!window.postMessage){return f}var d=f.prototype;e.extend(d.options,{vimeoVideoIdProperty:"vimeo",vimeoPlayerUrl:"https://player.vimeo.com/video/VIDEO_ID?api=1&player_id=PLAYER_ID",vimeoPlayerIdPrefix:"vimeo-player-",vimeoClickToPlay:false});var b=d.textFactory||d.imageFactory;var c=function(i,j,h,g){this.url=i;this.videoId=j;this.playerId=h;this.clickToPlay=g;this.element=document.createElement("div");this.listeners={}};var a=0;e.extend(c.prototype,{on:function(g,h){this.listeners[g]=h;return this},loadAPI:function(){var k=this;var m="https://f.vimeocdn.com/js/froogaloop2.min.js";var l=document.getElementsByTagName("script");var g=l.length;var j;var h;function n(){if(!h&&k.playOnReady){k.play()}h=true}while(g){g-=1;if(l[g].src===m){j=l[g];break}}if(!j){j=document.createElement("script");j.src=m}e(j).on("load",n);l[0].parentNode.insertBefore(j,l[0]);if(/loaded|complete/.test(j.readyState)){n()}},onReady:function(){var g=this;this.ready=true;this.player.addEvent("play",function(){g.hasPlayed=true;g.onPlaying()});this.player.addEvent("pause",function(){g.onPause()});this.player.addEvent("finish",function(){g.onPause()});if(this.playOnReady){this.play()}},onPlaying:function(){if(this.playStatus<2){this.listeners.playing();this.playStatus=2}},onPause:function(){this.listeners.pause();delete this.playStatus},insertIframe:function(){var g=document.createElement("iframe");g.src=this.url.replace("VIDEO_ID",this.videoId).replace("PLAYER_ID",this.playerId);g.id=this.playerId;g.allow="autoplay";this.element.parentNode.replaceChild(g,this.element);this.element=g},play:function(){var g=this;if(!this.playStatus){this.listeners.play();this.playStatus=1}if(this.ready){if(!this.hasPlayed&&(this.clickToPlay||(window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform)))){this.onPlaying()}else{this.player.api("play")}}else{this.playOnReady=true;if(!window.$f){this.loadAPI()}else{if(!this.player){this.insertIframe();this.player=$f(this.element);this.player.addEvent("ready",function(){g.onReady()})}}}},pause:function(){if(this.ready){this.player.api("pause")}else{if(this.playStatus){delete this.playOnReady;this.listeners.pause();delete this.playStatus}}}});e.extend(d,{VimeoPlayer:c,textFactory:function(i,j){var g=this.options;var h=this.getItemProperty(i,g.vimeoVideoIdProperty);if(h){if(this.getItemProperty(i,g.urlProperty)===undefined){i[g.urlProperty]="https://vimeo.com/"+h}a+=1;return this.videoFactory(i,j,new c(g.vimeoPlayerUrl,h,g.vimeoPlayerIdPrefix+a,g.vimeoClickToPlay))}return b.call(this,i,j)}});return f});