(function(b){if(typeof define==="function"&&define.amd){define(["./blueimp-helper","./blueimp-gallery-video"],b)}else{b(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}})(function(j,i){if(!window.postMessage){return i}var k=i.prototype;j.extend(k.options,{vimeoVideoIdProperty:"vimeo",vimeoPlayerUrl:"https://player.vimeo.com/video/VIDEO_ID?api=1&player_id=PLAYER_ID",vimeoPlayerIdPrefix:"vimeo-player-",vimeoClickToPlay:false});var g=k.textFactory||k.imageFactory;var l=function(b,a,c,d){this.url=b;this.videoId=a;this.playerId=c;this.clickToPlay=d;this.element=document.createElement("div");this.listeners={}};var h=0;j.extend(l.prototype,{on:function(b,a){this.listeners[b]=a;return this},loadAPI:function(){var c=this;var a="https://f.vimeocdn.com/js/froogaloop2.min.js";var b=document.getElementsByTagName("script");var f=b.length;var d;var e;function o(){if(!e&&c.playOnReady){c.play()}e=true}while(f){f-=1;if(b[f].src===a){d=b[f];break}}if(!d){d=document.createElement("script");d.src=a}j(d).on("load",o);b[0].parentNode.insertBefore(d,b[0]);if(/loaded|complete/.test(d.readyState)){o()}},onReady:function(){var a=this;this.ready=true;this.player.addEvent("play",function(){a.hasPlayed=true;a.onPlaying()});this.player.addEvent("pause",function(){a.onPause()});this.player.addEvent("finish",function(){a.onPause()});if(this.playOnReady){this.play()}},onPlaying:function(){if(this.playStatus<2){this.listeners.playing();this.playStatus=2}},onPause:function(){this.listeners.pause();delete this.playStatus},insertIframe:function(){var a=document.createElement("iframe");a.src=this.url.replace("VIDEO_ID",this.videoId).replace("PLAYER_ID",this.playerId);a.id=this.playerId;a.allow="autoplay";this.element.parentNode.replaceChild(a,this.element);this.element=a},play:function(){var a=this;if(!this.playStatus){this.listeners.play();this.playStatus=1}if(this.ready){if(!this.hasPlayed&&(this.clickToPlay||(window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform)))){this.onPlaying()}else{this.player.api("play")}}else{this.playOnReady=true;if(!window.$f){this.loadAPI()}else{if(!this.player){this.insertIframe();this.player=$f(this.element);this.player.addEvent("ready",function(){a.onReady()})}}}},pause:function(){if(this.ready){this.player.api("pause")}else{if(this.playStatus){delete this.playOnReady;this.listeners.pause();delete this.playStatus}}}});j.extend(k,{VimeoPlayer:l,textFactory:function(b,a){var d=this.options;var c=this.getItemProperty(b,d.vimeoVideoIdProperty);if(c){if(this.getItemProperty(b,d.urlProperty)===undefined){b[d.urlProperty]="https://vimeo.com/"+c}h+=1;return this.videoFactory(b,a,new l(d.vimeoPlayerUrl,c,d.vimeoPlayerIdPrefix+h,d.vimeoClickToPlay))}return g.call(this,b,a)}});return i});