(function(b){if(typeof define==="function"&&define.amd){define(["./blueimp-helper","./blueimp-gallery"],b)}else{b(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}})(function(h,g){var f=g.prototype;h.extend(f.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoIframeClass:"video-iframe",videoCoverClass:"video-cover",videoPlayClass:"video-play",videoPlaysInline:true,videoPreloadProperty:"preload",videoPosterProperty:"poster"});var e=f.handleSlide;h.extend(f,{handleSlide:function(a,b){e.call(this,a,b);this.setTimeout(function(){if(this.activeVideo){this.activeVideo.pause()}})},videoFactory:function(B,G,A){var F=this;var J=this.options;var z=this.elementPrototype.cloneNode(false);var K=h(z);var D=[{type:"error",target:z}];var d=A||document.createElement("video");var c=this.elementPrototype.cloneNode(false);var C=document.createElement("a");var H=this.getItemProperty(B,J.urlProperty);var L=this.getItemProperty(B,J.sourcesProperty);var a=this.getItemProperty(B,J.titleProperty);var b=this.getItemProperty(B,J.videoPosterProperty);var E=[C];var I;var y;var i;K.addClass(J.videoContentClass);h(C).addClass(J.videoPlayClass);if(!h(c).addClass(J.videoCoverClass).hasClass(J.toggleClass)){E.push(c)}c.draggable=false;if(a){z.title=a;C.setAttribute("aria-label",a)}if(b){c.style.backgroundImage='url("'+b+'")'}if(d.setAttribute){if(J.videoPlaysInline){d.setAttribute("playsinline","")}}else{K.addClass(J.videoIframeClass)}d.preload=this.getItemProperty(B,J.videoPreloadProperty)||"none";if(this.support.source&&L){for(i=0;i<L.length;i+=1){d.appendChild(h.extend(this.sourcePrototype.cloneNode(false),L[i]))}}if(H){d.src=H}C.href=H||(L&&L.length&&L[0].src);if(d.play&&d.pause){(A||h(d)).on("error",function(){F.setTimeout(G,D)}).on("pause",function(){if(d.seeking){return}y=false;K.removeClass(F.options.videoLoadingClass).removeClass(F.options.videoPlayingClass);if(I){F.container.addClass(F.options.controlsClass)}d.controls=false;if(d===F.activeVideo){delete F.activeVideo}if(F.interval){F.play()}}).on("playing",function(){y=false;c.removeAttribute("style");K.removeClass(F.options.videoLoadingClass).addClass(F.options.videoPlayingClass)}).on("play",function(){window.clearTimeout(F.timeout);y=true;K.addClass(F.options.videoLoadingClass);if(F.container.hasClass(F.options.controlsClass)){I=true;F.container.removeClass(F.options.controlsClass)}else{I=false}d.controls=true;F.activeVideo=d});h(E).on("click",function(j){F.preventDefault(j);F.activeVideo=d;if(y){d.pause()}else{d.play()}});z.appendChild((A&&A.element)||d)}z.appendChild(c);z.appendChild(C);this.setTimeout(G,[{type:"load",target:z}]);return z}});return g});